# 目次
- [目次](#目次)
- [概要](#概要)
- [要望](#要望)
  - [自分](#自分)
  - [家族](#家族)
    - [1回目](#1回目)
    - [2回目](#2回目)
- [要求](#要求)
  - [機能要求](#機能要求)
    - [認証機能](#認証機能)
    - [グループ機能](#グループ機能)
    - [家計簿機能](#家計簿機能)
  - [非機能要求](#非機能要求)
- [要件](#要件)

# 概要
このドキュメントでは、コンテキストモデルをもとにして、利用者にシステムに対するヒアリングを行い要求モデルを作成します。

- 要望：利用者（アクタ）からヒアリングしたもの。思いつきレベルのもの。
- 要求：要望を整理して構造化し、粒度を合わせたもの。機能要求、非機能要求がある。
- 要件：最終的に開発で実施すると決めた重要なもの。上位の利害関係者との確認用項目として整理する。

参考：[顧客の要求を確実に仕様にできる要件定義マニュアル](https://www.shuwasystem.co.jp/book/9784798020990.html)


# 要望

## 自分
- 家計簿アプリとして
  - 複数人で管理した
    - ユーザがグループを作成して、それに招待したりしたい
    - ユーザはログインしたらグループを切り替えられるようにしたい
    - 個人用の家計簿と家族用の家計簿などを作れるようにしたい
- 技術要素として
  - 設計の練習としたい
    - 参考：[はじめての設計をやり抜くための本](https://www.shoeisha.co.jp/book/detail/9784798153766)
  - ドメイン駆動設計の練習としたい
    - 参考：[ドメイン駆動設計入門](https://www.shoeisha.co.jp/book/detail/9784798150727)
  - フロントエンド部分はSPAで作成したい
    - 処理は原則バックエンドで行い、フロントエンドは簡単な入力・出力のみにしたい
- その他
  - 練習としてユーザ作成、ログインなどの認証機能を実装したい

## 家族
### 1回目
- 固定費と変動費を分けて管理したい
  - 変動費は現在使っている分の合計がわかるようにしたい
- 予算を設定できるようにした
- クレジットカードの明細を連携したい
- 表形式とカレンダー形式で見たい
  - カレンダーの場合は1週間の合計が表示されてほしい
  - お金を使ってない日は可愛いマークが表示されてほしい
    - 褒めポイント的なものがたまってほしい
- 使ったものを記録するときは現金/クレジットカード/QRコード決済などから選べるようにしたい
- 食費や日用品などカテゴリがほしい
- グラフで表示されてほしい

### 2回目
- 特別支出のページがほしい
  - 通常の支出とは別に管理したい
  - 1年分まとめて見ることができるページがほしい
    - ここに入れると各月のページにも反映されてほしい
    - 変動費の合計には入らないでほしい
- ライフプラン表がほしい
  - 例えば20XX年に子供が生まれる予定、など
    - どの年に支出が増えそうかシミュレーションしたい
  - ずっと先まで行を足せるようにしたい
- カテゴリの項目はデフォルトのものと自分でカスタマイズできるものがほしい
- カレンダー表示はその日をクリックするとその日の内訳が出るようにしたい
- レシートの金額を入力するとき、その詳細も任意で入力できるようにしたい
  - 余裕があるときに野菜別の値段をいれておけば相場がわかる
- カテゴリごとに予算を設定したい
- 今の自分の資産を入れる場所がほしい
- 予算などは一度いれたら毎月ずっと同じ値が自動で入るようになってほしい
  - トグルなどのボタンでON/OFFを設定したい
- レシートの画像を保存できるようにしたい


# 要求

## 機能要求

### 認証機能
- メールアドレスとパスワードを登録することでユーザを作成できる
- パスワードを変更できる
- パスワードを忘れた場合、登録したメールアドレスにメールを送ってパスワードを再設定できる
- 自分の名前を登録できる

### グループ機能
- ユーザを作成したら自動で自分のみが入っているデフォルトのグループが作成される
- ユーザはグループ名を指定してグループを作成できる
- ユーザはグループに他のユーザを招待できる
- ユーザはグループを切り替えて家計簿を表示することができる

### 家計簿機能
- 変動費の入力
  - 日付を指定して入力できる
  - 以下の項目を入力できる
    - カテゴリ
      - マスタから選択できる
      - 自分でも追加できる
    - 金額
    - 支出元
      - 現金、クレジットカード、QRコード決済などを入力できる
    - 内容(テキスト入力)
  - 任意で金額の詳細も入力できる
  - レシートなどの画像を添付できる

- 変動費の表示
  - カレンダー形式
    - その日の合計金額が表示できる
    - クリックするとその日の内訳が表示できる
    - 使っていない日にはかわいいマークが表示される
    - その週で使った合計金額が表示できる
  - 一覧形式
    - 日付順に家計簿の内訳が一覧で表示できる
  - グラフ
    - カテゴリごとに円グラフで表示できる

- 特別支出
  - 1年分を一覧で表示できる
  - 月ごとに金額と内容を入力できる
  - 月ごとに合計金額が表示できる

- 予算と実績の入力・表示
  - 次の項目が1ヶ月分1ページに表示できる
    - 収入
      - 以下の項目を入力できる
        - 内容
        - 金額
    - 固定費
      - 以下の項目を入力できる
        - 内容
        - 金額
    - 変動費
      - カテゴリごとに以下の項目を入力・表示できる
        - 予算
          - カテゴリごとに金額を設定できる
          - 1クリックで次の月に引き継ぐことができる
        - 実績
          - 変動費の入力で入れたものの合計値が表示される
      - 収支
        - 自動で計算されて表示できる
    - 特別支出
      - 特別支出で入力したものが表示できる
    - 積立・貯蓄額
      - 以下の項目を入力できる
        - 内容
        - 金額
    - 今月の支出合計
      - 以下の項目が自動で計算されて表示できる
      - 収支合計
      - 貯蓄額

- ライフプラン作成
  - 表形式で1年1行で表示できる
  - 年ごとに誰にいくら掛かるのかを入力できる
  - 年ごとのイベントをテキストで入力できる
  - 年を追加することができる

## 非機能要求
- BackendはDDD(ドメイン駆動設計)にもとづいてC#で実装する
- FrontendはAngularで作成する
- インフラはAWSで構築する


# 要件
基本的に要求で記載した機能要求を実現するが、以下の機能は初期開発時には開発しない
- 変動費の入力における画像添付機能
  - 画像の保存場所をDB or S3などのストレージにするか、家計簿機能全体を作成したあとで考える
- ライフプラン作成機能
  - 家計簿機能からは独立しているため、あとで追加する